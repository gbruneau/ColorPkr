<!DOCTYPE html>
<html>
<head>
    <title>Custom Events Example</title>
</head>
<body>
    <button id="addItem">Add to Cart</button>
    <p id="cartCount">Cart: 0 items</p>

    <script>
        // Listen for the custom event on document
        document.addEventListener('itemAdded', (event) => {
            const item = event.detail;  // Access custom data
            console.log(`Added ${item.name} ($${item.price}) to cart`);
            updateCartDisplay();
        });

        // Function to update UI (simulating cart state)
        function updateCartDisplay() {
            const count = document.getElementById('cartCount');
            count.textContent = `Cart: ${Math.floor(Math.random() * 5) + 1} items`;  // Demo only
        }

        // Button handler dispatches the custom event
        document.getElementById('addItem').addEventListener('click', () => {
            const itemData = { name: 'Laptop', price: 999 };
            const itemAddedEvent = new CustomEvent('itemAdded', {
                detail: itemData,
                bubbles: true,    // Allows bubbling up DOM
                cancelable: true  // Could be prevented with event.preventDefault()
            });
            document.dispatchEvent(itemAddedEvent);
        });
    </script>
</body>
</html>